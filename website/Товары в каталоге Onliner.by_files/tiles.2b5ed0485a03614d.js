var Onliner=Onliner||{};Onliner.Tiles={asset:[]},Onliner.Tiles.randomize=function(a){var b,c=$("#"+a),d=c.find("."+a);return c.find(".placeholder").hide(),b=d.eq(Math.floor(Math.random()*d.length)),b.show(),b},Onliner.Tiles.autoscale=function(a){if(a){var b=this,c=a.find("iframe");c.length&&(b._scaleFrame(a,c),$(window).resize(function(){b._scaleFrame(a,c)}))}},Onliner.Tiles.truncate=function(a,b){if(!a)return!1;var c={"max-lines-1":1,"max-lines-2":2,"max-lines-3":3,"max-lines-4":4,"max-lines-5":5};return $.each(c,function(b,c){a.find("."+b).trunk8({lines:c})}),b||Onliner.Tiles.asset.push(a),a},Onliner.Tiles.truncateAgain=function(){return $.each(Onliner.Tiles.asset,function(a,b){Onliner.Tiles.truncate(b,!0)}),Onliner.Tiles.asset},Onliner.Tiles._scaleFrame=function(a,b){var c=a.height(),d=a.width(),e=b.height(),f=b.width(),g=Math.max(c/e,d/f);b.css({position:"absolute",top:"50%",left:"50%","-webkit-transform":"translateX(-50%) translateY(-50%) scale("+g+")","-o-transform":"translateX(-50%) translateY(-50%) scale("+g+")",transform:"translateX(-50%) translateY(-50%) scale("+g+")"})},$(function(){function a(){var a=$(".b-tile-popular--baraholka").find(".b-tile-popular-list"),b=a.find(".item"),c=a.height(),d=0;b.hide(),b.each(function(a,b){var e=$(b);if(e.show(),d+=e.height(),d>=c)return e.hide(),!1})}$(".b-tile-img",$(".b-tile-recommended")).hover(function(){$(this).siblings(".b-tile-header").find("a").addClass("hover")},function(){$(this).siblings(".b-tile-header").find("a").removeClass("hover")}),$(".b-tile-popular").each(function(){var a,b=$(this),c=b.find(".b-tile-popular-img");b.find(".item a").hover(function(){a=c.eq($(this).data("index")),c.filter(":animated").not(".last-animated").stop(!0,!1),a.stop(!0,!1),a.fadeTo(1e3,1)},function(){a.addClass("last-animated"),a.fadeTo(1e3,0,function(){$(this).removeClass("last-animated")})})}),$(".b-tile").hover(function(){$(".b-tile-grad",$(this)).addClass("last-animated").fadeTo(200,1)},function(){$(".b-tile-grad",$(this)).not("last-animated").stop(!0,!1),$(".b-tile-grad",$(this)).fadeTo(200,.5)}),a(),$(window).on("resize",_.debounce(function(){Onliner.Tiles.truncateAgain(),a()},200))}),function(){function a(a){this.$element=$(a),this.original_text=this.$element.html(),this.settings=$.extend({},$.fn.trunk8.defaults)}function b(a){var b=document.createElement("DIV");return b.innerHTML=a,b.textContent||b.innerText}function c(a){if(b(a)===a)return a.split(/\s/g);for(var d,e,f=[],g=/<([a-z]+)([^<]*)(?:>(.*?(?!<\1>)*)<\/\1>|\s+\/>)(['.?!,]*)|((?:[^<>\s])+['.?!,]*\w?|<br\s?\/?>)/gi,h=g.exec(a);h&&d!==g.lastIndex;)d=g.lastIndex,h[5]?f.push(h[5]):h[1]&&f.push({tag:h[1],attribs:h[2],content:h[3],after:h[4]}),h=g.exec(a);for(e=0;e<f.length;e++)"string"!=typeof f[e]&&f[e].content&&(f[e].content=c(f[e].content));return f}function d(a,b,c){a=a.replace(c,"");var d=function(b,e){var f,g,h,i,j="";for(i=0;i<b.length;i++)f=b[i],h=$.trim(a).split(" ").length,$.trim(a).length&&("string"==typeof f?(/<br\s*\/?>/.test(f)||(1===h&&$.trim(a).length<=f.length?(f=a,"p"!==e&&"div"!==e||(f+=c),a=""):a=a.replace(f,"")),j+=$.trim(f)+(i===b.length-1||h<=1?"":" ")):(g=d(f.content,f.tag),f.after&&(a=a.replace(f.after,"")),g&&(f.after||(f.after=" "),j+="<"+f.tag+f.attribs+">"+g+"</"+f.tag+">"+f.after)));return j},e=d(b);return e.slice(e.length-c.length)===c&&(e+=c),e}function e(){var a,e,f,h,j,k,l=this.data("trunk8"),m=l.settings,n=m.width,o=m.side,p=m.fill,q=m.parseHTML,r=g.getLineHeight(this)*m.lines,s=l.original_text,t=s.length,u="";if(this.html(s),j=this.text(),q&&b(s)!==s&&(k=c(s),s=b(s),t=s.length),n===i.auto){if(this.height()<=r)return;for(a=0,e=t-1;a<=e;)f=a+(e-a>>1),h=g.eatStr(s,o,t-f,p),q&&k&&(h=d(h,k,p)),this.html(h),this.height()>r?e=f-1:(a=f+1,u=u.length>h.length?u:h);this.html(""),this.html(u),m.tooltip&&this.attr("title",j)}else isNaN(n)?$.error('Invalid width "'+n+'".'):(f=t-n,h=g.eatStr(s,o,f,p),this.html(h),m.tooltip&&this.attr("title",s))}var f,g,h={center:"center",left:"left",right:"right"},i={auto:"auto"};a.prototype.updateSettings=function(a){this.settings=$.extend(this.settings,a)},f={init:function(b){return this.each(function(){var c=$(this),d=c.data("trunk8");d||c.data("trunk8",d=new a(this)),d.updateSettings(b),e.call(c)})},update:function(a){return this.each(function(){var b=$(this);a&&(b.data("trunk8").original_text=a),e.call(b)})},revert:function(){return this.each(function(){var a=$(this).data("trunk8").original_text;$(this).html(a)})},getSettings:function(){return $(this.get(0)).data("trunk8").settings}},g={eatStr:function(a,b,c,d){var e,f,i=a.length,j=g.eatStr.generateKey.apply(null,arguments);if(g.eatStr.cache[j])return g.eatStr.cache[j];if("string"==typeof a&&0!==i||$.error('Invalid source string "'+a+'".'),c<0||c>i)$.error('Invalid bite size "'+c+'".');else if(0===c)return a;switch("string"!=typeof(d+"")&&$.error("Fill unable to be converted to a string."),b){case h.right:return g.eatStr.cache[j]=$.trim(a.substr(0,i-c))+d;case h.left:return g.eatStr.cache[j]=d+$.trim(a.substr(c));case h.center:return e=i>>1,f=c>>1,g.eatStr.cache[j]=$.trim(g.eatStr(a.substr(0,i-e),h.right,c-f,""))+d+$.trim(g.eatStr(a.substr(i-e),h.left,f,""));default:$.error('Invalid side "'+b+'".')}},getLineHeight:function(a){var b=$(a).css("float");"none"!==b&&$(a).css("float","none");var c=$(a).css("position");"absolute"===c&&$(a).css("position","static");var d,e=$(a).html(),f="line-height-test";return $(a).html("i").wrap('<div id="'+f+'" />'),d=$("#"+f).innerHeight(),$(a).html(e).css({float:b,position:c}).unwrap(),d}},g.eatStr.cache={},g.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,"")},$.fn.trunk8=function(a){return f[a]?f[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void $.error("Method "+a+" does not exist on jQuery.trunk8"):f.init.apply(this,arguments)},$.fn.trunk8.defaults={fill:"&hellip;",lines:1,side:h.right,tooltip:!0,width:i.auto,parseHTML:!1}}();