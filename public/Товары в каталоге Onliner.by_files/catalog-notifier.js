!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./modules/CatalogNotifier");!function(){var a=window.notificationsService;window.catalogNotifier=new d(a),$(document).ready(function(){window.catalogNotifier.init()})}()},{"./modules/CatalogNotifier":2}],2:[function(a,b,c){function d(a){this.notificationsService=a,this.notificationsDispatcher=a.getEventDispatcher()}var e=a("../modules/authService");d.prototype.init=function(){this._subscribePrivateChannel(),this._subscribe()},d.prototype._subscribePrivateChannel=function(){var a=e.getCurrentUserId(),b="$catalog.user."+a;a&&this.notificationsService.addChannel(b,"catalog")},d.prototype._subscribe=function(){var a=this,b={"catalog.tender.offer.created":function(a){},"catalog.tender.offer.deleted":function(a){}};_.each(b,function(b,c){a.subscribeOnEvent(c,b)})},d.prototype.subscribeOnEvent=function(a,b){var c=this,d=[].concat(a||[]);_.each(d,function(a){c._subscribeOnEvent(a,b)})},d.prototype._subscribeOnEvent=function(a,b){this.notificationsDispatcher&&this.notificationsDispatcher.subscribe("catalog:"+a,b)},b.exports=d},{"../modules/authService":3}],3:[function(a,b,c){function d(){return s&&t&&t>j()}function e(){return!!h()}function f(){return!!o.get("onl_session")}function g(){return"function"!=typeof r.is_sms_validated?null:!!r.is_sms_validated()}function h(){return!d()&&i(),s}function i(){var a=j(),b=q.query();return b?(b.done(function(b){s=b.access_token,t=a+b.expires_in-20}),void b.fail(function(){s=null,t=null})):(s=null,void(t=null))}function j(){return(new Date).getTime()/1e3}function k(){return window.MODELS&&window.MODELS.currentUser||null}function l(){var a=k();return a&&a.id()||null}function m(){return p.secureProjectUrl("profile","login")+"?redirect="+window.location.href}function n(){return p.secureProjectUrl("profile","/edit#edit/sms-validation")}var o=a("cookies-js"),p=a("../modules/url.js"),q=a("./credentialsServer.js"),r=MODELS.currentUser||{},s=null,t=null;b.exports={getToken:h,isAuthenticatedByToken:e,isAuthenticatedByCookie:f,isSmsValidated:g,getCurrentUser:k,getCurrentUserId:l,getLoginUrl:m,getSmsValidationUrl:n}},{"../modules/url.js":5,"./credentialsServer.js":4,"cookies-js":6}],4:[function(a,b,c){function d(){return f.get("onl_session")}var e=a("./url.js"),f=a("cookies-js"),g=e.secureProjectUrl("credentials.api","/oauth/token"),h=d();credentialsServer={updateClientSecret:function(){h=d()},query:function(){return h?$.ajax({async:!1,type:"POST",url:g,data:{client_id:"onliner_user",client_secret:h,grant_type:"client_credentials"}}):null}},b.exports=credentialsServer},{"./url.js":5,"cookies-js":6}],5:[function(a,b,c){!function(a,c){"object"==typeof b&&"object"==typeof b.exports?b.exports=c:a.URL=c}(this,function(){function a(a,b){a=_.compact(a);var c=window.location,d=(a.length?"?":"")+a.join("&"),e=c.origin+c.pathname+d+c.hash;b?window.history.replaceState({},"",e):window.history.pushState({},"",e)}var b={};return b.baseDomain=function(){return document.location.host.split(".").slice(-2).join(".")}(),b.projectDomain=function(a){return a+"."+b.baseDomain},b.projectUrl=function(a,c,d){return c=c?c.replace(/^\/*/,"/"):"",d=d||"http://",d+b.projectDomain(a)+c},b.secureProjectUrl=function(a,c){return b.projectUrl(a,c,"https://")},b.composeSecondOfferPrivateMessageUrl=function(a){return b.secureProjectUrl("chats","/compose/"+a.user.id+"/second/"+a.id)},b.redirect=function(a){document.location.href=a},b.removeHash=function(){history.replaceState("",document.title,window.location.pathname+window.location.search)},b.queryParamsToJson=function(){var a=window.location.search.replace("?",""),b={};try{b=JSON.parse('{"'+decodeURI(a).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(a){}return b},b.setParameterToQueryString=function(b,c,d){var e=(window.location.search||"").replace(/(^\?)/,""),f=b+"="+c,g=_.compact(e.split("&")),h=_.map(g,function(a){var c=a.split("=")[0];return c===b?f:a}),i=_.find(h,function(a){var c=a.split("=")[0];return c===b});i||h.push(f),a(h,d)},b.removeParameterFromQueryString=function(b,c){var d=(window.location.search||"").replace(/(^\?)/,""),e=_.compact(d.split("&")),f=_.filter(e,function(a){var c=a.split("=")[0];return c!==b});a(f,c)},b}())},{}],6:[function(a,b,c){!function(a,d){"use strict";var e=function(a){if("object"!=typeof a.document)throw new Error("Cookies.js requires a `window` with a `document` object");var b=function(a,c,d){return 1===arguments.length?b.get(a):b.set(a,c,d)};return b._document=a.document,b._cacheKeyPrefix="cookey.",b._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),b.defaults={path:"/",secure:!1},b.get=function(a){b._cachedDocumentCookie!==b._document.cookie&&b._renewCache();var c=b._cache[b._cacheKeyPrefix+a];return c===d?d:decodeURIComponent(c)},b.set=function(a,c,e){return e=b._getExtendedOptions(e),e.expires=b._getExpiresDate(c===d?-1:e.expires),b._document.cookie=b._generateCookieString(a,c,e),b},b.expire=function(a,c){return b.set(a,d,c)},b._getExtendedOptions=function(a){return{path:a&&a.path||b.defaults.path,domain:a&&a.domain||b.defaults.domain,expires:a&&a.expires||b.defaults.expires,secure:a&&a.secure!==d?a.secure:b.defaults.secure}},b._isValidDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())},b._getExpiresDate=function(a,c){if(c=c||new Date,"number"==typeof a?a=a===1/0?b._maxExpireDate:new Date(c.getTime()+1e3*a):"string"==typeof a&&(a=new Date(a)),a&&!b._isValidDate(a))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return a},b._generateCookieString=function(a,b,c){a=a.replace(/[^#$&+\^`|]/g,encodeURIComponent),a=a.replace(/\(/g,"%28").replace(/\)/g,"%29"),b=(b+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),c=c||{};var d=a+"="+b;return d+=c.path?";path="+c.path:"",d+=c.domain?";domain="+c.domain:"",d+=c.expires?";expires="+c.expires.toUTCString():"",d+=c.secure?";secure":""},b._getCacheFromString=function(a){for(var c={},e=a?a.split("; "):[],f=0;f<e.length;f++){var g=b._getKeyValuePairFromCookieString(e[f]);c[b._cacheKeyPrefix+g.key]===d&&(c[b._cacheKeyPrefix+g.key]=g.value)}return c},b._getKeyValuePairFromCookieString=function(a){var b=a.indexOf("=");b=b<0?a.length:b;var c,d=a.substr(0,b);try{c=decodeURIComponent(d)}catch(a){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+d+'"',a)}return{key:c,value:a.substr(b+1)}},b._renewCache=function(){b._cache=b._getCacheFromString(b._document.cookie),b._cachedDocumentCookie=b._document.cookie},b._areEnabled=function(){var a="cookies.js",c="1"===b.set(a,1).get(a);return b.expire(a),c},b.enabled=b._areEnabled(),b},f=a&&"object"==typeof a.document?e(a):e;"function"==typeof define&&define.amd?define(function(){return f}):"object"==typeof c?("object"==typeof b&&"object"==typeof b.exports&&(c=b.exports=f),c.Cookies=f):a.Cookies=f}("undefined"==typeof window?this:window)},{}]},{},[1]);